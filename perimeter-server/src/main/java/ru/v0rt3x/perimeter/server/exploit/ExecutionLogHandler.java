package ru.v0rt3x.perimeter.server.exploit;

import java.util.List;

public class ExecutionLogHandler {

    private final Integer exploit;
    private final Integer team;
    private final Handler handler;

    public ExecutionLogHandler(Integer exploit, Integer team, Handler handler) {
        this.exploit = exploit;
        this.team = team;

        this.handler = handler;
    }

    @Override
    public int hashCode() {
        return (exploit.hashCode() & 0xff << 8) | (team.hashCode() & 0xff);
    }

    @Override
    public boolean equals(Object o) {
        if (o instanceof ExecutionLogHandler) {
            ExecutionLogHandler other = (ExecutionLogHandler) o;
            return other.exploit.equals(exploit) && other.team.equals(team);
        }

        return false;
    }

    public Integer getExploit() {
        return exploit;
    }

    public Integer getTeam() {
        return team;
    }

    public void handle(List<String> output, List<String> error) {
        handler.handle(output, error);
    }

    @FunctionalInterface
    public interface Handler {

        void handle(List<String> output, List<String> error);

    }
}
